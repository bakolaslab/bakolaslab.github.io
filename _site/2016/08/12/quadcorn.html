<!DOCTYPE html>
<!--

  _                    _  _                 _         _
 | |                  | |(_)               | |       | |
 | | __ ___   _ __  __| | _  _ __    __ _  | |  __ _ | |__
 | |/ // _ \ | '__|/ _` || || '_ \  / _` | | | / _` || '_ \
 |   <| (_) || |  | (_| || || | | || (_| | | || (_| || |_) |
 |_|\_\\___/ |_|   \__,_||_||_| |_| \__, | |_| \__,_||_.__/
                                     __/ |
                                    |___/


I love those that desire the impossible - Goethe.
(if you get email from Konrad, you will see this quote)

                boing         boing         boing
      e-e           . - .         . - .         . - .
     (\_/)\       '       `.   ,'       `.   ,'       .
      `-'\ `--.___,         . .           . .          .
         '\( ,_.-'
            \\               "             "            a:f
            ^'

^ This is basically T-Rex jumping

-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Setting up Quadcorn for remote use</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,600">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Roboto" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
  <link href="http://localhost:4000/css/zoom.css" rel="stylesheet">
  <script src="http://localhost:4000/js/zoom.js"></script>
  <script src="http://localhost:4000/js/transition.js"></script>

  <link rel="stylesheet" href="/style.css">
  <!-- favicon -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
  <link rel="shortcut icon" href="http://localhost:4000/favicon.png">
  <link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/logo/apple-touch-icon-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/logo/apple-touch-icon-72x72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/logo/apple-touch-icon-114x114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/logo/apple-touch-icon-144x144-precomposed.png">

  <!-- open graph -->

  
  
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:url" content="http://localhost:4000/2016/08/12/quadcorn.html">
  <meta property="og:title" content="Setting up Quadcorn for remote use">
  <meta property="og:site_name" content="Bakolas Lab at the University of Texas at Austin">
  <meta property="og:description" content="
  Setting up Quadcorn for remote use
  posted on August 12, 2016
  
  Here, we document how to configure quadcorn for remote access.

We mostly fo..." />
  <meta property="og:image" content="http://localhost:4000/images/logo/logo_square.jpg">

</head>

<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//kordinglab.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<body id="page-top" style="padding-top: 7em;">

    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class='navbar-brand page-scroll' href='/'>
              <span style='font-family:"Open Sans" font-weight:300'>Bakolas Lab</span>
              </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <ul class="nav navbar-nav navbar-right">
                      
                      <li><a class='name' href="/">home</a></li>
                      
                      <li><a class='name' href="/research">research</a></li>
                      
                      <li><a class='name' href="/publication">publications</a></li>
                      
                      <li><a class='name' href="/people">people</a></li>
                      
                    </ul>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
</nav>

    <div class="container content post">
  <h3><strong>Setting up Quadcorn for remote use</strong><br/>
  <small>posted on August 12, 2016</small></h3>
  <hr>
  <p>Here, we document how to configure <code class="language-plaintext highlighter-rouge">quadcorn</code> for remote access.</p>

<p>We mostly followed the instructions <a href="https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys">here</a>.</p>

<h3 id="on-the-server">On the server</h3>

<p>Setup user accounts on <code class="language-plaintext highlighter-rouge">quadcorn</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; sudo useradd -m --create-home USERNAME
</code></pre></div></div>

<p>Choose password:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; sudo passwd USERNAME
</code></pre></div></div>

<p>See <a href="http://unix.stackexchange.com/questions/87114/how-do-i-know-a-specified-users-permissions-on-linux-with-root-access">here</a> if you forgot <code class="language-plaintext highlighter-rouge">-m</code>.</p>

<p>Once you have created the users, setup the usergroup.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; sudo groupadd -r GROUPNAME
</code></pre></div></div>

<p>Add each user to the group.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; sudo usermod -a -G GROUPNAME user1
&gt;&gt; sudo usermod -a -G GROUPNAME user2
</code></pre></div></div>

<p>Start the SSH service.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; /etc/init.d/ssh start
</code></pre></div></div>

<p>Open the SSH Daemon config file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; atom /etc/ssh/sshd_config
</code></pre></div></div>

<p>Add the following lines to only allow our user group:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#Which groups of users to allow
AllowGroups GROUPNAME
</code></pre></div></div>

<p>Edit the port number with a custom PORT_NUMBER:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#What ports, IPs and protocols we listen for
#Port 22
Port PORT_NUMBER
</code></pre></div></div>

<p>Check that X11 forwarding is set to yes:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>X11Forwarding yes
</code></pre></div></div>

<p>We used:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GROUPNAME=kordinglab
PORT_NUMBER=5000
</code></pre></div></div>

<p>Once this is done, just restart the ssh server:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo service ssh restart
</code></pre></div></div>

<h3 id="on-your-client">On your client</h3>

<p>The IP address of our server will be given to you.</p>

<p>To login to the server, type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; ssh -X -p PORT_NUMBER USERNAME@IP_ADDRESS
</code></pre></div></div>

<p>But we can do better than remembering all these details. We need to let the ssh program know the host IP address, the user login, and the port to listen to. To do so, create the <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; atom ~/.ssh/config`
</code></pre></div></div>

<p>Type in the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host quadcorn
  HostName IP_ADDRESS
  ForwardX11 yes
  Compression yes
  Ciphers blowfish-cbc
  Port PORT_NUMBER
  User USERNAME
</code></pre></div></div>

<p>Now we can simply do this instead:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; ssh quadcorn
</code></pre></div></div>

<p>This replaces the much more cumbersome option where you need to remember everything.</p>

<h3 id="customize-your-settings-to-use-global-software-installs">Customize your settings to use global software installs</h3>

<p>Once you login to <code class="language-plaintext highlighter-rouge">quadcorn</code>, 
to make sure that you can use most of the installed software, 
you need to edit your <code class="language-plaintext highlighter-rouge">~/.profile</code> file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; atom ~/.profile
</code></pre></div></div>

<p>Now add the following lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># set PATH to include anaconda global directory
PATH="/opt/anaconda/anaconda2/bin:$PATH"

# set PATH, LD_LIBRARY_PATH for cuda
export PATH="/usr/local/cuda/bin:$PATH"
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/cuda/lib64"

# to get the bash shell, otherwise you get `/bin/sh` by default
/bin/bash
</code></pre></div></div>

<p>To test that the path to python is set correctly, type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; which python
</code></pre></div></div>

<p>You should see:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/opt/anaconda/anaconda2/bin/python
</code></pre></div></div>

<p>To test whether cuda is installed correctly, type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; nvcc -V
</code></pre></div></div>

<p>You should see something like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2015 NVIDIA Corporation
Built on Tue_Aug_11_14:27:32_CDT_2015
Cuda compilation tools, release 7.5, V7.5.17
</code></pre></div></div>

  <ul class="share-buttons">
  <a style="color:#3b5998;" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2016/08/12/quadcorn.html" title="Share on Facebook" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a style="color:#0084b4;" href="https://twitter.com/intent/tweet?text=http://localhost:4000/2016/08/12/quadcorn.html" title="Share on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
</ul>

  <div id="disqus_thread"></div>
</div>


    <script id="dsq-count-scr" src="//kordinglab.disqus.com/count.js" async></script>
    <script src="http://code.jquery.com/jquery-2.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-34145995-1");
    pageTracker._trackPageview();
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34145995-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-34145995-1');
    </script>

</body>
</html>
